{"version":3,"sources":["webpack:///webpack/bootstrap 37ef24e98b5904be0027","webpack:///./js/Main.js","webpack:///./js/Util/FileFormat.js","webpack:///./js/Util/BinaryReader.js","webpack:///./js/Util/ExtendableError.js","webpack:///./js/Core/Project.js","webpack:///./js/Core/Layer.js","webpack:///./js/Util/EntityIDs.js","webpack:///./js/Entities/StickFigure.js","webpack:///./js/Util/Drawing.js","webpack:///./js/Util/Interpolation.js","webpack:///./js/Entities/BitmapObject.js","webpack:///./js/Entities/LineObject.js","webpack:///./js/Entities/RectObject.js","webpack:///./js/Entities/CircleObject.js","webpack:///./js/Entities/PolyObject.js","webpack:///./js/Entities/TextObject.js","webpack:///./js/Entities/Camera.js","webpack:///./js/Core/Frameset.js","webpack:///./js/Core/Keyframe.js"],"names":[],"mappings":"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","file":"./build/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 37ef24e98b5904be0027\n **/","/* global self */\n\n\"use strict\";\n\nimport {TisfatColorToCSS} from \"./Util/FileFormat.js\";\nimport BinaryReader from \"./Util/BinaryReader.js\";\nimport Project from \"./Core/Project.js\";\n\nvar FILE_FORMAT_VERSION = 7;\n\nif (top === self)\n  document.body.style.backgroundColor = \"black\";\n\nvar eTextView = document.getElementById(\"text-view\");\nvar eMainView = document.getElementById(\"main-view\");\n\neTextView.style.display = \"block\";\neTextView.textContent = \"Initializing player...\";\n\nvar eView = document.getElementById(\"view\");\nvar eTime = document.getElementById(\"time\");\nvar eText = document.getElementById(\"text\");\nvar eLink = document.getElementById(\"link\");\nvar eBtnPlay = document.getElementById(\"btn-play\");\n\nvar project = null;\nvar isPlaying = false;\nvar playStartFrame = null;\nvar playStartTime = null;\n\nfunction playFrame(time) {\n  if (!isPlaying)\n    return;\n\n  if (playStartTime === null)\n    playStartTime = time;\n\n  // const frame = playStartFrame + (time - playStartTime) / 1000 * project.fps;\n  let frame;\n  frame = (time - playStartTime) / 1000;\n  let x = 1.0 / project.fps;\n  frame = Math.floor(frame / x) * x; // this seems inefficient\n  frame *= project.animSpeed;\n  frame += playStartFrame;\n\n  eTime.value = frame;\n  draw();\n\n  if (frame >= project.getEndTime())\n    setPlaying(false);\n  else\n    requestAnimationFrame(playFrame);\n}\n\nfunction setPlaying(state) {\n  if (state) {\n    if (!isPlaying)\n      requestAnimationFrame(playFrame);\n\n    if (eTime.value >= project.getEndTime())\n      eTime.value = 0;\n\n    isPlaying = true;\n    playStartTime = null;\n    playStartFrame = parseFloat(eTime.value);\n\n    eBtnPlay.textContent = \"Pause\";\n  }\n  else {\n    isPlaying = false;\n    playStartTime = null;\n    playStartFrame = null;\n\n    eBtnPlay.textContent = \"Play\";\n  }\n}\n\nfunction draw() {\n  if (project === null)\n    return;\n\n  eText.textContent = \"Frame \" + (Math.floor(eTime.value) + 1) + \"/\" + (project.getEndTime() + 1);\n\n  var context = eView.getContext(\"2d\");\n\n  context.fillStyle = TisfatColorToCSS(project.backgroundColor);\n  context.fillRect(0, 0, eView.width, eView.height);\n\n  context.save();\n\n  const cameraLayer = project.layers[0];\n  const cameraState = cameraLayer.findCurrentState(eTime.value);\n  cameraLayer.data.transform(context, cameraState);\n\n  project.draw(context, eTime.value);\n  context.restore();\n}\n\nfunction onProjectLoad() {\n  eTextView.style.display = \"none\";\n  eMainView.style.display = \"block\";\n\n  eView.width = project.width;\n  eView.height = project.height;\n\n  eTime.max = project.getEndTime();\n  eTime.value = 0;\n  eTime.style.width = project.width + \"px\";\n\n  draw();\n}\n\neBtnPlay.addEventListener(\"click\", () => {\n  if (project === null)\n    return;\n\n  setPlaying(!isPlaying);\n});\n\neTime.addEventListener(\"input\", () => {\n  if (isPlaying) {\n    playStartTime = null;\n    playStartFrame = parseFloat(eTime.value);\n  }\n\n  draw();\n});\n\neTextView.textContent = \"Loading TISFAT Zero project...\";\neLink.href = location.search.substring(1);\n\nclass BadVersionError {\n  constructor(version, maxSupported) {\n    this.version = version;\n    this.maxSupported = maxSupported;\n  }\n}\n\nclass HTTPError { }\n\nfetch(eLink.href).then(response => {\n  if (!response.ok)\n    throw new HTTPError();\n\n  return response.arrayBuffer();\n}).then(arrayBuffer => {\n  eTextView.textContent = \"Parsing TISFAT Zero project...\";\n  var reader = new BinaryReader(arrayBuffer, true);\n  var version = reader.ReadUInt16();\n\n  if (version > FILE_FORMAT_VERSION)\n    throw new BadVersionError(version, FILE_FORMAT_VERSION);\n\n  project = Project.read(reader, version);\n  onProjectLoad();\n}).catch(error => {\n  console.error(error);\n  console.log(error.stack);\n\n  if (error instanceof HTTPError) {\n    eTextView.textContent = `Failed to fetch the project file from '${eLink.href}'.\n                             Check for bad links or CORS support.`;\n  } else if (error instanceof BadVersionError) {\n    eTextView.textContent = `Failed to parse the project (file format version ${error.version},\n                             this viewer only supports up to version ${error.maxSupported})`;\n  } else {\n    eTextView.textContent = \"Something unhandled went wrong while trying to load the project. \" + error;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Main.js\n **/","\"use strict\";\n\n// not the right place for this\nexport function TisfatColorToCSS(color) {\n  const [a, r, g, b] = color;\n  return `rgba(${r},${g},${b},${a/255})`;\n}\n\nexport function TisfatReadList(reader, version, func) {\n  const list = [];\n  const count = reader.ReadUInt16();\n\n  for (var i = 0; i < count; i++) {\n    list.push(func(reader, version));\n  }\n\n  return list;\n}\n\nexport function TisfatReadColor(reader, version) {\n  const a = reader.ReadByte();\n  const r = reader.ReadByte();\n  const g = reader.ReadByte();\n  const b = reader.ReadByte();\n  return [a, r, g, b];\n}\n\nexport function TisfatReadBitmap(reader) {\n  const bytes = reader.ReadInt32();\n  const buffer = reader.Read(bytes);\n\n  const blob = new Blob([buffer], {type: \"image/png\"});\n\n  const domURL = window.URL || window.webkitURL || window;\n  const url = domURL.createObjectURL(blob);\n  const img = new Image();\n\n  img.onload = () => domURL.revokeObjectURL(url);\n  img.src = url;\n\n  return img;\n}\n\nexport function TisfatReadPointF(reader) {\n  const x = reader.ReadDouble();\n  const y = reader.ReadDouble();\n  return [x, y];\n}\n\nexport function TisfatReadVec3(reader) {\n  const x = reader.ReadDouble();\n  const y = reader.ReadDouble();\n  const z = reader.ReadDouble();\n  return [x, y, z];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Util/FileFormat.js\n **/","\"use strict\";\n\nimport ExtendableError from \"./ExtendableError.js\";\n\nexport class DataFormatError extends ExtendableError { }\n\nexport default class BinaryReader {\n  constructor(arrayBuffer, littleEndian) {\n    this.arrayBuffer = arrayBuffer;\n    this.dataView = new DataView(arrayBuffer);\n    this.littleEndian = littleEndian;\n    this.cursor = 0;\n  }\n\n  Read(count) {\n    var value = this.arrayBuffer.slice(this.cursor, this.cursor + count);\n    this.cursor += count;\n    return value;\n  }\n\n  ReadBoolean() {\n    return this.ReadByte() !== 0;\n  }\n\n  ReadByte() {\n    var value = this.dataView.getUint8(this.cursor, this.littleEndian);\n    this.cursor++;\n    return value;\n  }\n\n  ReadUInt16() {\n    var value = this.dataView.getUint16(this.cursor, this.littleEndian);\n    this.cursor += 2;\n    return value;\n  }\n\n  ReadUInt32() {\n    var value = this.dataView.getUint32(this.cursor, this.littleEndian);\n    this.cursor += 4;\n    return value;\n  }\n\n  ReadInt32() {\n    var value = this.dataView.getInt32(this.cursor, this.littleEndian);\n    this.cursor += 4;\n    return value;\n  }\n\n  ReadDouble() {\n    var value = this.dataView.getFloat64(this.cursor, this.littleEndian);\n    this.cursor += 8;\n    return value;\n  }\n\n  Read7BitEncodedInt() {\n      // Read out an Int32 7 bits at a time.  The high bit\n      // of the byte when on means to continue reading more bytes.\n      var count = 0;\n      var shift = 0;\n      var b;\n      do {\n          // Check for a corrupted stream.  Read a max of 5 bytes.\n          // In a future version, add a DataFormatException.\n          if (shift == 5 * 7)  // 5 bytes max per Int32, shift += 7\n              throw new DataFormatError(\"Bad 7-bit encoded Int32\");\n\n          // ReadByte handles end of stream cases for us.\n          b = this.ReadByte();\n          count |= (b & 0x7F) << shift;\n          shift += 7;\n      } while ((b & 0x80) !== 0);\n      return count;\n  }\n\n  ReadString() {\n    //var test = this.ReadByte();\n    //if (test >= 127) throw new Error(\"watch out\");\n    var test = this.Read7BitEncodedInt();\n    var data = this.Read(test);\n    var decoded = String.fromCharCode.apply(null, new Uint8Array(data));\n    return decoded;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Util/BinaryReader.js\n **/","\"use strict\";\n\nexport default class ExtendableError extends Error {\n  constructor(message) {\n    super();\n    this.message = message;\n    this.stack = (new Error()).stack;\n    this.name = this.constructor.name;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Util/ExtendableError.js\n **/","\"use strict\";\n\nimport Layer from \"./Layer.js\";\nimport Frameset from \"./Frameset.js\";\nimport Keyframe from \"./Keyframe.js\";\nimport {Camera} from \"../Entities/Camera.js\";\nimport {TisfatReadList, TisfatReadColor} from \"../Util/FileFormat.js\";\n\nexport default class Project {\n  constructor() {\n    this.layers = [];\n    this.animSpeed = 10.0;\n    this.fps = 60.0;\n    this.width = 460;\n    this.height = 360;\n    this.backgroundColor = [255, 255, 255, 255];\n  }\n\n  static read(reader, version) {\n    const project = new Project();\n\n    project.layers = TisfatReadList(reader, version, Layer.read);\n    console.log(project.layers.map(l => l.name));\n\n    if (version < 6) {\n      project.layers.unshift(project.createCameraLayer());\n      /* Camera camera = new Camera();\n      Layers.Insert(0, camera.CreateDefaultLayer(0, (uint)Program.MainTimeline.GetLastTime(), null)); */\n    }\n\n    if (version >= 1) {\n      project.animSpeed = reader.ReadDouble();\n\n      if (version >= 5)\n        project.fps = reader.ReadDouble();\n\n      if (version >= 2) {\n        project.width = reader.ReadInt32();\n        project.height = reader.ReadInt32();\n        project.backgroundColor = TisfatReadColor(reader, version);\n      }\n    }\n\n    return project;\n  }\n\n  draw(ctx, time) {\n    for (let layer of this.layers) {\n      layer.draw(ctx, time);\n    }\n  }\n\n  getEndTime() {\n    let endTime = 0;\n\n    for (let layer of this.layers) {\n      endTime = Math.max(endTime,\n        layer.framesets[layer.framesets.length - 1].getEndTime());\n    }\n\n    return endTime;\n  }\n\n  createCameraLayer() {\n    const camera = new Camera();\n    const layer = new Layer();\n    const frameset = new Frameset();\n\n    layer.name = \"Camera\";\n    layer.timelineColor = [255, 70, 120, 255];\n    layer.data = camera;\n\n    frameset.keyframes.push(new Keyframe(0, camera.createRefState()));\n    frameset.keyframes.push(new Keyframe(this.getEndTime(), camera.createRefState()));\n    layer.framesets.push(frameset);\n\n    return layer;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Core/Project.js\n **/","\"use strict\";\n\nimport {TisfatReadColor, TisfatReadList} from \"../Util/FileFormat.js\";\nimport {TisfatResolveEntityID} from \"../Util/EntityIDs.js\";\nimport Frameset from \"./Frameset.js\";\n\nexport default class Layer {\n  constructor() {\n    this.name = \"Layer\";\n    this.visible = true;\n    this.timelineColor = \"aliceblue\";\n    this.data = null;\n    this.framesets = [];\n    this.depth = 0;\n  }\n\n  static read(reader, version) {\n    const layer = new Layer();\n    layer.name = reader.ReadString();\n    layer.visible = reader.ReadBoolean();\n    layer.timelineColor = TisfatReadColor(reader, version);\n    const type = TisfatResolveEntityID(reader.ReadUInt16());\n    layer.data = type.read(reader, version);\n    layer.framesets = TisfatReadList(reader, version, Frameset.read);\n\n    return layer;\n  }\n\n  findFrameset(time) {\n    for (let frameset of this.framesets) {\n      if (time >= frameset.getStartTime() && time <= frameset.getEndTime())\n        return frameset;\n    }\n\n    return null;\n  }\n\n  findCurrentState(time) {\n    if (!this.visible || this.data === null)\n      return null;\n\n    const frameset = this.findFrameset(time);\n\n    if (frameset === null)\n      return null;\n\n    let nextIndex;\n\n    for (nextIndex = 1; nextIndex < frameset.keyframes.length; nextIndex++) {\n      if (frameset.keyframes[nextIndex].time >= time)\n        break;\n    }\n\n    const current = frameset.keyframes[nextIndex - 1];\n    const target = frameset.keyframes[nextIndex];\n\n    const t = (time - current.time) / (target.time - current.time);\n    return this.data.interpolate(t, current.state, target.state, current.interpMode);\n  }\n\n  draw(ctx, time) {\n    const state = this.findCurrentState(time);\n\n    if (state !== null)\n      this.data.draw(ctx, state);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Core/Layer.js\n **/","\"use strict\";\n\nimport {StickFigure, StickFigureState} from \"../Entities/StickFigure.js\";\nimport {BitmapObject, BitmapObjectState} from \"../Entities/BitmapObject.js\";\n// import {PointLight, PointLightState} from \"../Entities/PointLight.js\";\nimport {LineObject, LineObjectState} from \"../Entities/LineObject.js\";\nimport {RectObject, RectObjectState} from \"../Entities/RectObject.js\";\nimport {CircleObject, CircleObjectState} from \"../Entities/CircleObject.js\";\nimport {PolyObject, PolyObjectState} from \"../Entities/PolyObject.js\";\nimport {TextObject, TextObjectState} from \"../Entities/TextObject.js\";\nimport {Camera, CameraState} from \"../Entities/Camera.js\";\n\nconst TisfatEntityTypes = {\n  \"0\": StickFigure,\n  \"1\": BitmapObject,\n  // \"2\": PointLight,\n  \"3\": LineObject,\n  \"4\": RectObject,\n  \"5\": CircleObject,\n  \"6\": PolyObject,\n  \"7\": TextObject,\n  \"8\": /* CustomFigure */ StickFigure,\n  \"9\": Camera\n};\n\nconst TisfatEntityStateTypes = {\n  \"0\": StickFigureState,\n  \"1\": BitmapObjectState,\n  // \"2\": PointLightState,\n  \"3\": LineObjectState,\n  \"4\": RectObjectState,\n  \"5\": CircleObjectState,\n  \"6\": PolyObjectState,\n  \"7\": TextObjectState,\n  \"8\": /* CustomFigureState */ StickFigureState,\n  \"9\": CameraState\n};\n\nexport function TisfatResolveEntityID(id) {\n  if (TisfatEntityTypes[id])\n    return TisfatEntityTypes[id];\n\n  throw new Error(\"cannot resolve entity id \" + id);\n}\n\nexport function TisfatResolveEntityStateID(id) {\n  if (TisfatEntityStateTypes[id])\n    return TisfatEntityStateTypes[id];\n\n  throw new Error(\"cannot resolve entity state id \" + id);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Util/EntityIDs.js\n **/","\"use strict\";\n\nimport {TisfatReadPointF, TisfatReadColor, TisfatReadList, TisfatReadBitmap} from \"../Util/FileFormat.js\";\nimport {TisfatCircle, TisfatCappedLine} from \"../Util/Drawing.js\";\nimport {Interpolate, InterpolateColor, InterpolatePointF} from \"../Util/Interpolation.js\";\n\nexport class StickFigureJointState {\n  constructor() {\n    this.parent = null;\n    this.children = [];\n    this.location = [0, 0];\n    this.jointColor = [255, 0, 0, 0];\n    this.thickness = 6;\n    this.bitmapIndex = -1;\n    this.manipulatable = true;\n  }\n\n  static read(reader, version) {\n    const state = new StickFigureJointState();\n    state.location = TisfatReadPointF(reader, version);\n    state.jointColor = TisfatReadColor(reader, version);\n    state.thickness = reader.ReadDouble();\n\n    if (version >= 2) {\n      state.manipulatable = reader.ReadBoolean();\n\n      if (version >= 4)\n        state.bitmapIndex = reader.ReadInt32();\n    }\n\n    state.children = TisfatReadList(reader, version, StickFigureJointState.read);\n\n    for (let child of state.children)\n      child.parent = state;\n\n    return state;\n  }\n\n  static interpolate(t, current, target, mode) {\n    const state = new StickFigureJointState();\n    state.parent = current.parent;\n    state.bitmapIndex = current.bitmapIndex;\n\n    state.location = InterpolatePointF(t, current.location, target.location, mode);\n    state.jointColor = InterpolateColor(t, current.jointColor, target.jointColor, mode);\n    state.thickness = Interpolate(t, current.thickness, target.thickness, mode);\n\n    for (var i = 0; i < current.children.length; i++) {\n      state.children.push(StickFigureJointState.interpolate(t, current.children[i], target.children[i], mode));\n    }\n\n    return state;\n  }\n}\n\nexport class StickFigure {\n  static read(reader, version) {\n    const figure = new StickFigure();\n    figure.root = StickFigureJoint.read(reader, version);\n    return figure;\n  }\n\n  draw(ctx, state) {\n    this.root.draw(ctx, state.root);\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new StickFigureState();\n    state.root = StickFigureJointState.interpolate(t, current.root, target.root, mode);\n    return state;\n  }\n}\n\nexport class StickFigureState {\n  static read(reader, version) {\n    const state = new StickFigureState();\n    state.root = StickFigureJointState.read(reader, version);\n    return state;\n  }\n}\n\nexport class StickFigureJoint {\n  constructor() {\n    this.parent = null;\n    this.children = [];\n    this.jointColor = [255, 0, 0, 0];\n    this.handleColor = [255, 0, 0, 255];\n    this.thickness = 6;\n\n    // this.bitmaps = [];\n    // this.bitmapOffsets = new Map();\n    this.initialBitmapIndex = -1;\n\n    this.handleVisible = true;\n    this.visible = true;\n    this.manipulatable = true;\n  }\n\n  static read(reader, version) {\n    const joint = new StickFigureJoint();\n    joint.parent = null;\n\n    joint.location = TisfatReadPointF(reader, version);\n    joint.jointColor = TisfatReadColor(reader, version);\n    joint.handleColor = TisfatReadColor(reader, version);\n    joint.thickness = reader.ReadDouble();\n\n    if (version >= 2) {\n      joint.drawType = reader.ReadString();\n      joint.handleVisible = reader.ReadBoolean();\n      joint.manipulatable = reader.ReadBoolean();\n      joint.visible = reader.ReadBoolean();\n    } else {\n      joint.drawType = reader.ReadBoolean() ? \"CircleLine\" : \"Normal\";\n    }\n\n    joint.children = TisfatReadList(reader, version, StickFigureJoint.read);\n\n    for (let child of joint.children)\n      child.parent = joint;\n\n    if (version >= 4) {\n      const names = TisfatReadList(reader, version, r => r.ReadString());\n      const images = TisfatReadList(reader, version, TisfatReadBitmap);\n      const rotations = TisfatReadList(reader, version, r => r.ReadDouble());\n      const offsets = TisfatReadList(reader, version, TisfatReadPointF);\n\n      // this.bitmaps = [];\n      // this.bitmapOffsets = new Map();\n\n      for (let i = 0; i < names.length; i++) {\n        // this.bitmaps.append(); // ???\n        // ???\n      }\n\n      joint.initialBitmapIndex = reader.ReadInt32();\n    }\n\n    return joint;\n  }\n\n  draw(ctx, state) {\n    if (this.children.count != state.children.count)\n      throw new Error(\"state does not match this joint\");\n\n    for (let i = 0; i < this.children.length; i++) {\n      this.children[i].drawTo(ctx, state.children[i], this, state);\n      this.children[i].draw(ctx, state.children[i]);\n    }\n  }\n\n  drawTo(ctx, state, otherJoint, otherState) {\n    if (!this.visible)\n      return;\n\n    switch (this.drawType) {\n    case \"CircleLine\":\n      const dx = state.location[0] - otherState.location[0];\n      const dy = state.location[1] - otherState.location[1];\n      const r = Math.sqrt(dx * dx + dy * dy) / 2;\n\n      const x = otherState.location[0] + dx / 2;\n      const y = otherState.location[1] + dy / 2;\n\n      TisfatCircle(ctx, [x, y], r, state.jointColor);\n      break;\n    case \"CircleRadius\":\n      TisfatCircle(ctx, state.location, state.thickness, state.jointColor);\n      break;\n    case \"Normal\":\n      TisfatCappedLine(ctx, state.location, otherState.location, state.thickness, state.jointColor);\n      break;\n    default:\n      throw new Error(`unknown joint drawing type ${this.drawType}`);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/StickFigure.js\n **/","\"use strict\";\n\nimport {TisfatColorToCSS} from \"./FileFormat.js\";\n\nexport function TisfatCircle(ctx, center, radius, color) {\n  ctx.beginPath();\n  ctx.arc(center[0], center[1], radius, 0, 2 * Math.PI, false);\n  ctx.fillStyle = TisfatColorToCSS(color);\n  ctx.fill();\n}\n\nexport function TisfatCappedLine(ctx, a, b, thickness, color) {\n  ctx.beginPath();\n  ctx.moveTo(a[0], a[1]);\n  ctx.lineTo(b[0], b[1]);\n  ctx.lineWidth = thickness * 2;\n  ctx.strokeStyle = TisfatColorToCSS(color);\n  ctx.stroke();\n\n  TisfatCircle(ctx, a, thickness, color);\n  TisfatCircle(ctx, b, thickness, color);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Util/Drawing.js\n **/","\"use strict\";\n\nexport function Interpolate(t, a, b, mode) {\n  switch (mode) {\n  case \"None\": return t < 1 ? a : b;\n  case \"Linear\": return a + (b - a) * t;\n  case \"QuadInOut\":\n    b -= a;\n    t *= 2;\n\n    if (t < 1) return b / 2 * t * t + a;\n    t--;\n    return -b / 2 * (t * (t - 2) - 1) + a;\n  case \"ExpoInOut\":\n    b -= a;\n    t *= 2;\n\n    if (t < 1) return b / 2 * Math.pow(2, 10 * (t - 1)) + a;\n    t--;\n    return b / 2 * (-Math.pow(2, -10 * t) + 2) + a;\n  case \"BounceOut\":\n    b -= a;\n\n    if (t < 1 / 2.75)\n    {\n      return b * (7.5625 * t * t) + a;\n    }\n    else if (t < 2 / 2.75)\n    {\n      t -= 1.5 / 2.75;\n      return b * (7.5625 * t * t + 0.75) + a;\n    }\n    else if (t < 2.5 / 2.75)\n    {\n      t -= 2.25 / 2.75;\n      return b * (7.5625 * t * t + 0.9375) + a;\n    }\n    else\n    {\n      t -= 2.625 / 2.75;\n      return b * (7.5625 * t * t + 0.984375) + a;\n    }\n    break; // thanks JSHint\n  case \"BackOut\":\n    b -= a;\n    // ew\n    return b * ((t = t - 1) * t * ((1.70158 + 1) * t + 1.70158) + 1) + a;\n  default:\n    throw new Error(\"unknown interpMode \" + mode);\n  }\n}\n\nexport function InterpolatePointF(t, a, b, mode) {\n  return [Interpolate(t, a[0], b[0], mode), Interpolate(t, a[1], b[1], mode)];\n}\n\nexport function InterpolateColor(t, a, b, mode) {\n  return [\n    Math.max(Math.min(Interpolate(t, a[0], b[0], mode), 255), 0),\n    Math.max(Math.min(Interpolate(t, a[1], b[1], mode), 255), 0),\n    Math.max(Math.min(Interpolate(t, a[2], b[2], mode), 255), 0),\n    Math.max(Math.min(Interpolate(t, a[3], b[3], mode), 255), 0)\n  ];\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Util/Interpolation.js\n **/","\"use strict\";\r\n\r\nimport {TisfatReadBitmap, TisfatReadPointF} from \"../Util/FileFormat.js\";\r\nimport {Interpolate, InterpolatePointF} from \"../Util/Interpolation.js\";\r\n\r\nexport class BitmapObject {\r\n  static read(reader, version) {\r\n    const object = new BitmapObject();\r\n    object.bitmap = TisfatReadBitmap(reader, version);\r\n    return object;\r\n  }\r\n\r\n  interpolate(t, current, target, mode) {\r\n    const state = new BitmapObjectState();\r\n    state.location = InterpolatePointF(t, current.location, target.location, mode);\r\n    state.size = InterpolatePointF(t, current.size, target.size, mode);\r\n    state.rotation = Interpolate(t, current.rotation, target.rotation, mode);\r\n    state.alpha = Interpolate(t, current.alpha, target.alpha, mode);\r\n    return state;\r\n  }\r\n\r\n  draw(ctx, state) {\r\n    const [x, y] = state.location;\r\n    const [width, height] = state.size;\r\n    // TODO: alpha and rotation\r\n    ctx.drawImage(this.bitmap, x, y, width, height);\r\n  }\r\n}\r\n\r\nexport class BitmapObjectState {\r\n  static read(reader, version) {\r\n    const state = new BitmapObjectState();\r\n    state.location = TisfatReadPointF(reader, version);\r\n    state.size = TisfatReadPointF(reader, version);\r\n    const width = reader.ReadDouble();\r\n    const height = reader.ReadDouble();\r\n    state.rotation = reader.ReadDouble();\r\n\r\n    if (version >= 5)\r\n      state.alpha = reader.ReadInt32();\r\n    else\r\n      state.alpha = 255;\r\n\r\n    return state;\r\n  }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/BitmapObject.js\n **/","\"use strict\";\n\nimport {TisfatCappedLine} from \"../Util/Drawing.js\";\nimport {TisfatReadPointF, TisfatReadColor} from \"../Util/FileFormat.js\";\nimport {Interpolate, InterpolatePointF, InterpolateColor} from \"../Util/Interpolation.js\";\n\nexport class LineObject {\n  static read() {\n    return new LineObject();\n  }\n\n  draw(ctx, state) {\n    TisfatCappedLine(ctx, state.a, state.b, state.thickness, state.color);\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new LineObjectState();\n    state.a = InterpolatePointF(t, current.a, target.a, mode);\n    state.b = InterpolatePointF(t, current.b, target.b, mode);\n    state.color = InterpolateColor(t, current.color, target.color, mode);\n    state.thickness = Interpolate(t, current.thickness, target.thickness, mode);\n    return state;\n  }\n}\n\nexport class LineObjectState {\n  static read(reader, version) {\n    const state = new LineObjectState();\n    state.a = TisfatReadPointF(reader, version);\n    state.b = TisfatReadPointF(reader, version);\n    state.color = TisfatReadColor(reader, version);\n    state.thickness = reader.ReadDouble();\n    return state;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/LineObject.js\n **/","\"use strict\";\n\nimport {TisfatColorToCSS, TisfatReadPointF, TisfatReadColor} from \"../Util/FileFormat.js\";\nimport {InterpolatePointF, InterpolateColor} from \"../Util/Interpolation.js\";\n\nexport class RectObject {\n  static read() {\n    return new RectObject();\n  }\n\n  draw(ctx, state) {\n    ctx.fillStyle = TisfatColorToCSS(state.color);\n    ctx.fillRect(state.position[0], state.position[1], state.extent[0], state.extent[1]);\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new RectObjectState();\n    state.position = InterpolatePointF(t, current.position, target.position, mode);\n    state.extent = InterpolatePointF(t, current.extent, target.extent, mode);\n    state.color = InterpolateColor(t, current.color, target.color, mode);\n    return state;\n  }\n}\n\nexport class RectObjectState {\n  static read(reader, version) {\n    const state = new RectObjectState();\n    state.position = TisfatReadPointF(reader, version);\n    state.extent = TisfatReadPointF(reader, version);\n    state.color = version >= 3 ? TisfatReadColor(reader, version) : [255, 0, 0, 0];\n    return state;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/RectObject.js\n **/","\"use strict\";\n\nimport {TisfatCircle} from \"../Util/Drawing.js\";\nimport {Interpolate, InterpolatePointF, InterpolateColor} from \"../Util/Interpolation.js\";\nimport {TisfatReadPointF, TisfatReadColor} from \"../Util/FileFormat.js\";\n\nclass CircleObject {\n  static read() {\n    return new CircleObject();\n  }\n\n  draw(ctx, state) {\n    TisfatCircle(ctx, state.position, state.radius, state.color);\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new CircleObjectState();\n    state.position = InterpolatePointF(t, current.position, target.position, mode);\n    state.radius = Interpolate(t, current.radius, target.radius, mode);\n    state.color = InterpolateColor(t, current.color, target.color, mode);\n    return state;\n  }\n}\n\nclass CircleObjectState {\n  static read(reader, version) {\n    const state = new CircleObjectState();\n    state.position = TisfatReadPointF(reader, version);\n    state.radius = reader.ReadDouble();\n    state.color = TisfatReadColor(reader, version);\n    return state;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/CircleObject.js\n **/","\"use strict\";\n\nimport {TisfatColorToCSS, TisfatReadList, TisfatReadPointF, TisfatReadColor} from \"../Util/FileFormat.js\";\nimport {InterpolateColor, InterpolatePointF} from \"../Util/Interpolation.js\";\n\nexport class PolyObject {\n  static read(reader, version) {\n    return new PolyObject();\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new PolyObjectState();\n    state.color = InterpolateColor(t, current.color, target.color, mode);\n\n    for (let i = 0; i < current.points.length; i++) {\n      const joint = new PolyObjectJoint();\n      joint.location = InterpolatePointF(t, current.points[i].location, target.points[i].location, mode);\n      state.points.append(joint);\n    }\n\n    return state;\n  }\n\n  draw(ctx, state) {\n    ctx.fillStyle = TisfatColorToCSS(state.color);\n    ctx.beginPath();\n    let isFirst = true;\n    for (let {location} of state.points) {\n      if (isFirst) {\n        ctx.moveTo(location);\n        isFirst = false;\n      } else {\n        ctx.lineTo(location);\n      }\n    }\n    ctx.closePath();\n    ctx.fill();\n  }\n}\n\nexport class PolyObjectJoint {\n  static read(reader, version) {\n    this.location = TisfatReadPointF(reader, version);\n  }\n}\n\nexport class PolyObjectState {\n  static read(reader, version) {\n    const state = new PolyObjectState();\n    state.points = TisfatReadList(reader, version, PolyObjectJoint.read);\n    state.color = TisfatReadColor(reader, version);\n    return state;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/PolyObject.js\n **/","\"use strict\";\n\nimport {TisfatColorToCSS, TisfatReadPointF, TisfatReadColor} from \"../Util/FileFormat.js\";\nimport {InterpolateColor, InterpolatePointF} from \"../Util/Interpolation.js\";\n\n// TODO: handle .NET FontStyle [Flags] enum\n// FlagsAttribute causes the enum string to be a list separated by \", \"\nconst FontStyleMap = {\n  \"Bold\": \"bold\",\n  \"Italic\": \"italic\",\n  \"Regular\": \"normal\",\n  /* \"Strikeout\": \"strikeout\",\n  \"Underline\": \"underline\" */\n};\n\nconst TextAlignmentMap = {\n  \"Center\": \"center\",\n  \"Far\": \"end\",\n  \"Near\": \"start\"\n};\n\nconst TextBaselineMap = {\n  \"Center\": \"middle\",\n  \"Far\": \"bottom\",\n  \"Near\": \"top\"\n};\n\nexport class TextObject {\n  static read() {\n    return new TextObject();\n  }\n\n  draw(ctx, state) {\n    ctx.font = state.textFont;\n    ctx.fillStyle = TisfatColorToCSS(state.textColor);\n    ctx.textAlign = TextAlignmentMap[state.textAlignment];\n    ctx.textBaseline = \"top\";\n    // TODO: take into account state.size!\n    ctx.fillText(state.text, state.location, state.location);\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new TextObjectState();\n\n    state.location = InterpolatePointF(t, current.location, target.location, mode);\n    state.size = InterpolatePointF(t, current.size, target.size, mode);\n\n    state.text = current.text;\n    state.textAlignment = current.textAlignment;\n    state.textFont = current.textFont;\n    state.textColor = InterpolateColor(t, current.textColor, target.textColor, mode);\n\n    return state;\n  }\n}\n\nexport class TextObjectState {\n  static read(reader, version) {\n    const state = new TextObjectState();\n    state.location = TisfatReadPointF(reader, version);\n    state.size = TisfatReadPointF(reader, version);\n    state.text = reader.ReadString();\n    const fontName = reader.ReadString();\n    const fontSize = reader.ReadDouble();\n    const fontStyle = reader.ReadString(); // ReadInt32\n    state.textFont = `${FontStyleMap[fontStyle]} ${fontSize}px ${fontName}`;\n    if (version > 7)\n      state.textColor = TisfatReadColor(reader, version);\n    else\n      state.textColor = [255, 0, 0, 0];\n    return state;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/TextObject.js\n **/","\"use strict\";\n\nimport {TisfatReadPointF} from \"../Util/FileFormat.js\";\nimport {Interpolate, InterpolatePointF} from \"../Util/Interpolation.js\";\n\nexport class CameraState {\n  static read(reader, version) {\n    const state = new CameraState();\n    state.location = TisfatReadPointF(reader, version);\n    state.scale = reader.ReadDouble();\n    state.angle = reader.ReadDouble();\n    return state;\n  }\n}\n\nexport class Camera {\n  static read() {\n    return new Camera();\n  }\n\n  interpolate(t, current, target, mode) {\n    const state = new CameraState();\n    state.location = InterpolatePointF(t, current.location, target.location, mode);\n    state.angle = Interpolate(t, current.angle, target.angle, mode);\n    state.scale = Interpolate(t, current.scale, target.scale, mode);\n    return state;\n  }\n\n  draw() { /* stub */ }\n\n  transform(ctx, state) {\n    const [x, y] = state.location;\n    const inv = 1 / state.scale;\n    // ctx.translate(-x * 1 / state.scale, -y * 1 / state.scale);\n    ctx.translate(-x / state.scale, -y / state.scale);\n    ctx.scale(inv, inv);\n    ctx.rotate(state.angle);\n  }\n\n  createRefState() {\n    const state = new CameraState();\n    state.location = [0, 0];\n    state.scale = 1;\n    state.angle = 0;\n    return state;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Entities/Camera.js\n **/","\"use strict\";\n\nimport Keyframe from \"./Keyframe.js\";\nimport {TisfatReadList} from \"../Util/FileFormat.js\";\n\nexport default class Frameset {\n  constructor() {\n    this.keyframes = [];\n  }\n\n  static read(reader, version) {\n    const frameset = new Frameset();\n    frameset.keyframes = TisfatReadList(reader, version, Keyframe.read);\n    return frameset;\n  }\n\n  getStartTime() {\n    return this.keyframes[0].time;\n  }\n\n  getEndTime() {\n    return this.keyframes[this.keyframes.length - 1].time;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Core/Frameset.js\n **/","\"use strict\";\n\nimport {TisfatResolveEntityStateID} from \"../Util/EntityIDs.js\";\n\nexport default class Keyframe {\n  constructor(time=0, state=null, interpMode=\"Linear\") {\n    this.time = time;\n    this.state = state;\n    this.interpMode = interpMode;\n  }\n\n  static read(reader, version) {\n    const keyframe = new Keyframe();\n    keyframe.time = reader.ReadUInt32();\n    const type = TisfatResolveEntityStateID(reader.ReadUInt16());\n    keyframe.interpMode = version >= 2 ? reader.ReadString() : \"Linear\";\n    keyframe.state = type.read(reader, version);\n    return keyframe;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/Core/Keyframe.js\n **/"],"sourceRoot":""}